<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.proj.frontend.controller.TasksController"
            styleClass="root">

    <center>
        <StackPane alignment="CENTER">
            <!-- Темна картка по центру -->
            <VBox styleClass="app-card"
                  spacing="20"
                  maxWidth="900"
                  prefWidth="900"
                  maxHeight="600"
                  prefHeight="600">

                <!-- ВЕРХНІЙ BAR: Back + назва групи -->
                <HBox spacing="10" alignment="CENTER_LEFT" maxWidth="900">
                    <Button text="Back to dashboard"
                            onAction="#handleBack"
                            styleClass="secondary-button"/>

                    <Region HBox.hgrow="ALWAYS"/>

                    <Label fx:id="groupLabel"
                           text="Tasks"
                           styleClass="app-header-title"/>
                </HBox>

                <!-- ТАБЛИЦЯ ЗАВДАНЬ -->
                <TableView fx:id="tasksTable"
                           VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="idColumn"          text="ID"          prefWidth="60"/>
                        <TableColumn fx:id="titleColumn"       text="Title"       prefWidth="170"/>
                        <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="260"/>
                        <TableColumn fx:id="statusColumn"      text="Status"      prefWidth="110"/>
                        <TableColumn fx:id="deadlineColumn"    text="Deadline"    prefWidth="130"/>
                    </columns>
                </TableView>

                <!-- НИЖНЯ ПАНЕЛЬ -->
                <VBox spacing="8" alignment="CENTER_LEFT" maxWidth="900">

                    <!-- ПЕРШИЙ РЯД: Add/Edit/Delete + Change status праворуч -->
                    <HBox spacing="10" alignment="CENTER_LEFT">

                        <!-- Ліва група кнопок -->
                        <Button text="Add task"
                                onAction="#handleAddTask"
                                styleClass="primary-action-button"/>

                        <Button text="Edit task"
                                onAction="#handleEditTask"
                                styleClass="secondary-button"/>

                        <Button text="Delete task"
                                onAction="#handleDeleteTask"
                                styleClass="danger-action-button"/>

                        <!-- Розтягувач -->
                        <Region HBox.hgrow="ALWAYS"/>

                        <!-- Права частина: зміна статусу -->
                        <Label text="Change status:" styleClass="field-label"/>

                        <ComboBox fx:id="statusCombo"
                                  prefWidth="160"
                                  styleClass="combo-field"/>

                        <Button text="Apply to selected task"
                                onAction="#handleChangeStatus"
                                styleClass="secondary-button"/>
                    </HBox>

                    <!-- ДРУГИЙ РЯД: підсумок дедлайнів + Show statistics -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label fx:id="deadlineSummaryLabel"
                               text=""
                               styleClass="summary-label"/>

                        <Region HBox.hgrow="ALWAYS"/>

                        <Button text="Show statistics"
                                onAction="#handleShowStats"
                                styleClass="secondary-button"/>
                    </HBox>

                </VBox>

            </VBox>
        </StackPane>
    </center>

</BorderPane>